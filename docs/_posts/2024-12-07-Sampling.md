---
layout:             post
title:              "Sampling with replacement, order doesn't matter"
date:               2024-12-07
categories:         math
---

Given a set with n elements, we have to sample k element from the set.
How many way to sample?


## First thoughts

### Sampling with replacement, order matters
S_R1_O1 = pow(n, k)

### Sampling without replacement, order matters
S_R0_O1 = n(n - 1)(n - 2) ... (n - k + 1) = n!/(n - k)!

### Sampling without replacement, order doesn't matter
We can just devide the result of sample without replacement, order matters of (n, k) with
the all the ways to order k elements. Number of ways to order k elements is permutation(k)
= k!.

S_R0_O0 = S_R0_O1(n, k) / permutation(k) = n!/(n - k)! . 1/k!

### Sampling with replacement, order doesn't matter
For example, our set is {a, b, c} and we want to sample 2 elements. Sampling a subset {a, b, a}
would be the same as sampling {a, a, b} because order doesn't matter. If we gives each element
in the set a unique integer, we can sort the sampled subset. For example, we map:

a -> 1, b -> 2, c -> 3

then {a, a, b} can be encoded as {1, 1, 2} and {a, b, a} can be encoded as {1, 2, 1}. Sorting both
subset would gives us {1, 1, 2} for both. This encoding and sorting can be used as an identity test
to see if 2 sampled subsets is one. Now we only need to count unique identities.

If we write the integers k each in a straight line:

1 1 2 2 3 3

Choosing k position from the above line gives us a unique identity. All the unique identities can be
generated by choosing k position from the line. The sampling with replacement, order doesn't matter 
becomes counting the number of ways to choose k positions from the line.

S_R1_O0 = S_R0_O0(nk, k)


## After checking the solution
Sampling with replacement, order doesn't matter is Bose-Einstein problem.
The solution is 

S_R0_O0(n + k - 1, k)

Taking the previous line;

1 1 2 2 3 3

Choosing positions (1, 6) gives us {a, c}, choosing positions (2, 6) also gives us {a, c}.